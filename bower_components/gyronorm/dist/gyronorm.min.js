
/* gyronorm.js v2.0.0 - https://github.com/dorukeker/gyronorm.git*/
!function(a,b){"function"==typeof define&&define.amd?define(function(){return a.GyroNorm=b()}):"object"==typeof module&&module.exports?module.exports=a.GyroNorm=b():a.GyroNorm=b()}(this,function(){function a(a){return Math.round(a*Math.pow(10,t))/Math.pow(10,t)}function b(){var b={};b=v?o.getScreenAdjustedEuler():o.getFixedFrameEuler();var c=p.getScreenAdjustedAcceleration(),e=p.getScreenAdjustedAccelerationIncludingGravity(),f=p.getScreenAdjustedRotationRate(),g=0;s===d?(g=b.alpha-k,g=0>g?360-Math.abs(g):g):g=b.alpha;var h={"do":{alpha:a(g),beta:a(b.beta),gamma:a(b.gamma),absolute:o.isAbsolute()},dm:{x:a(c.x),y:a(c.y),z:a(c.z),gx:a(e.x),gy:a(e.y),gz:a(e.z),alpha:a(f.alpha),beta:a(f.beta),gamma:a(f.gamma)}};return r&&(h.dm.gx*=l,h.dm.gy*=l,h.dm.gz*=l),h}function c(a){u&&("string"==typeof a&&(a={message:a,code:0}),u(a))}var d="game",e="world",f="deviceorientation",g="acceleration",h="accelerationinludinggravity",i="rotationrate",j=null,k=0,l=0,m=!1,n=!1,o=null,p=null,q=50,r=!0,s=d,t=2,u=null,v=!1,w=function(){};return w.GAME=d,w.WORLD=e,w.DEVICE_ORIENTATION=f,w.ACCELERATION=g,w.ACCELERATION_INCLUDING_GRAVITY=h,w.ROTATION_RATE=i,w.prototype.init=function(a){a&&a.frequency&&(q=a.frequency),a&&a.gravityNormalized&&(r=a.gravityNormalized),a&&a.orientationBase&&(s=a.orientationBase),a&&a.decimalCount&&(t=a.decimalCount),a&&a.logger&&(u=a.logger),a&&a.screenAdjusted&&(v=a.screenAdjusted);var b=new FULLTILT.getDeviceOrientation({type:s}).then(function(a){o=a}),c=(new FULLTILT.getDeviceMotion).then(function(a){p=a,l=p.getScreenAdjustedAccelerationIncludingGravity().z>0?1:-1});return Promise.all([b,c]).then(function(){n=!0})},w.prototype.end=function(){try{n=!1,this.stop(),p.stop(),o.stop()}catch(a){c(a)}},w.prototype.start=function(a){return n?(j=setInterval(function(){a(b())},q),void(m=!0)):void c({message:'GyroNorm is not initialized yet. First call the "init()" function.',code:1})},w.prototype.stop=function(){j&&(clearInterval(j),m=!1)},w.prototype.normalizeGravity=function(a){r=a?!0:!1},w.prototype.setHeadDirection=function(){return v||s===e?!1:(k=o.getFixedFrameEuler().alpha,!0)},w.prototype.startLogging=function(a){a&&(u=a)},w.prototype.stopLogging=function(){u=null},w.prototype.isAvailable=function(a){switch(a){case f:return o.isAvailable(o.ALPHA)&&o.isAvailable(o.BETA)&&o.isAvailable(o.GAMMA);case g:return p.isAvailable(p.ACCELERATION_X)&&p.isAvailable(p.ACCELERATION_Y)&&p.isAvailable(p.ACCELERATION_Z);case h:return p.isAvailable(p.ACCELERATION_INCLUDING_GRAVITY_X)&&p.isAvailable(p.ACCELERATION_INCLUDING_GRAVITY_Y)&&p.isAvailable(p.ACCELERATION_INCLUDING_GRAVITY_Z);case i:return p.isAvailable(p.ROTATION_RATE_ALPHA)&&p.isAvailable(p.ROTATION_RATE_BETA)&&p.isAvailable(p.ROTATION_RATE_GAMMA);default:return{deviceOrientationAvailable:o.isAvailable(o.ALPHA)&&o.isAvailable(o.BETA)&&o.isAvailable(o.GAMMA),accelerationAvailable:p.isAvailable(p.ACCELERATION_X)&&p.isAvailable(p.ACCELERATION_Y)&&p.isAvailable(p.ACCELERATION_Z),accelerationIncludingGravityAvailable:p.isAvailable(p.ACCELERATION_INCLUDING_GRAVITY_X)&&p.isAvailable(p.ACCELERATION_INCLUDING_GRAVITY_Y)&&p.isAvailable(p.ACCELERATION_INCLUDING_GRAVITY_Z),rotationRateAvailable:p.isAvailable(p.ROTATION_RATE_ALPHA)&&p.isAvailable(p.ROTATION_RATE_BETA)&&p.isAvailable(p.ROTATION_RATE_GAMMA)}}},w.prototype.isRunning=function(){return m},w});